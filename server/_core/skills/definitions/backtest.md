# 信号回测

## 描述

对交易信号进行历史回测，验证信号的有效性和收益表现。

## 触发词

- 回测
- 测试信号
- 验证策略
- 历史表现
- 胜率
- 信号有效吗

## 指令

执行信号回测任务时，按照以下步骤：

1. **确定回测参数**
   - 股票代码（必须）
   - 信号类型（启动日/MACD金叉/RSI超卖/放量突破）
   - 回测区间（默认近3个月）
   - 持有天数（默认5天）

2. **获取历史数据**
   - 调用 get_kline_data 获取日K线
   - 调用 analyze_stock_technical 获取每日技术指标

3. **信号识别**
   - 遍历历史数据
   - 标记符合信号条件的日期
   - 记录买入价格

4. **收益计算**
   - 计算每次信号后N日的收益
   - 统计胜率、平均收益、最大回撤

5. **生成报告**
   - 输出统计表格
   - 列出典型成功/失败案例
   - 给出策略评估

## 工具

- get_kline_data
- analyze_stock_technical
- get_fund_flow_history

## 示例

- 用户: "帮我回测一下比亚迪的启动日信号"
- 用户: "测试MACD金叉在茅台上的表现"
- 用户: "这个信号靠谱吗？历史数据怎么说"

## 工作流

1. 解析用户请求，确定股票和信号类型
2. 获取历史K线数据（120日）
3. 获取历史资金流向数据
4. 遍历识别信号触发点
5. 计算每次信号后的收益
6. 生成统计报告
