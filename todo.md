# Stock Tracker 项目 TODO

## 后端基础架构
- [x] 配置数据库模型（股票基本信息、观察池、K线数据缓存、AI分析缓存）
- [x] 创建后端API路由结构（stocks、watchlist、kline、analysis、news）
- [x] 配置Tushare API集成和token管理
- [x] 实现Redis缓存层（使用数据库缓存）
- [x] 创建数据获取服务（实时行情、K线数据、财务数据）

## 数据集成
- [x] 集成Tushare API获取股票列表
- [x] 实现实时行情数据获取和缓存
- [x] 实现K线数据获取（日K/周K/月K）
- [x] 实现技术指标计算（MACD、RSI、均线）
- [ ] 实现资金流向数据获取
- [ ] 实现新闻数据抓取

## 前端UI - 股票列表页面
- [x] 设计并实现股票列表卡片组件
- [x] 显示股票代码、名称、价格、涨跌幅
- [x] 实现涨跌颜色区分（涨绿跌红）
- [x] 添加搜索和筛选功能
- [ ] 实现下拉刷新更新价格

## 前端UI - 股票详情页面
- [x] 创建股票详情页面布局
- [x] 显示基本信息（价格、开高低、成交量）
- [x] 集成TradingView Lightweight Charts K线图
- [x] 实现K线图时间周期切换（日K/周K/月K）
- [x] 实现K线图交互（缩放、拖拽、十字线）
- [x] 添加成交量柱状图

## 技术指标展示
- [x] 创建技术指标卡片组件
- [x] 显示MACD指标和信号
- [x] 显示RSI指标和超买超卖区域
- [x] 显示均线系统（MA5/MA20/MA60）
- [x] 以卡片形式展示关键技术信号

## 资金流向分析
- [x] 创建资金流向卡片组件
- [ ] 显示主力资金净流入数据
- [ ] 显示北向资金动向
- [x] 显示换手率和成交额
- [ ] 添加资金流向趋势图表

## 新闻展示
- [ ] 创建新闻列表组件
- [ ] 抓取股票相关新闻
- [ ] 按时间排序展示
- [ ] 添加新闻来源和链接

## AI分析功能
- [x] 集成大语言模型API
- [x] 实现技术面分析（评分和信号）
- [ ] 实现情绪面分析（热度、讨论数）
- [ ] 实现资金面分析（资金流向评分）
- [x] 生成综合投资建议
- [x] 添加风险提示
- [x] 创建AI分析结果展示卡片

## 观察池管理
- [x] 创建观察池数据表
- [x] 实现添加股票到观察池
- [x] 实现删除股票功能
- [ ] 实现编辑备注和目标价
- [x] 实现观察池列表展示
- [ ] 添加价格提醒功能

## 性能优化
- [x] 实现数据缓存策略
- [x] 优化API响应时间
- [ ] 添加加载状态和骨架屏
- [x] 实现错误处理和重试机制

## 测试和部署
- [ ] 编写后端API单元测试
- [ ] 测试前端交互流程
- [ ] 优化移动端响应式布局
- [ ] 创建项目检查点

## 错误处理和降级方案
- [x] 修复Tushare API权限错误的错误处理
- [x] 添加友好的错误提示信息
- [x] 实现数据降级方案（替换为东方财富 API）
- [x] 优化前端错误显示

## 东方财富API集成
- [x] 研究东方财富免费API接口
- [x] 创建东方财富API集成服务
- [x] 实现股票搜索功能
- [x] 实现股票行情获取
- [x] 实现K线数据获取
- [x] 替换后端所有Tushare调用
- [x] 测试API功能

## Bug修复
- [x] 修复观察池添加功能的数据库插入错误
- [x] 修复React列表渲染的key警告
- [x] 测试观察池添加和删除功能

## 界面重设计（苹果股票应用风格）
- [x] 修改布局为左右分栏结构（左侧股票列表，右侧详情）
- [x] 实现股票列表的实时行情数据显示
- [x] 添加股票列表项的点击选中效果
- [x] 优化视觉风格为苹果风格（浅色背景、简洁设计）
- [x] 实现详情页的K线图和数据展示
- [x] 添加响应式设计（移动端自适应）

## 交互优化
- [x] 修改点击交互，点击股票后直接在右侧显示详情
- [x] 在右侧嵌入K线图组件
- [x] 显示价格信息和技术指标
- [x] 移除"查看详情"按钮

## 数据修复
- [x] 修复换手率显示为"--"的问题
- [x] 修复市盈率显示为"--"的问题
- [x] 检查东方财富API返回的完整数据字段

## K线图优化
- [x] 添加分时图功能作为默认视图
- [x] 将基本信息移到K线图右侧
- [x] 减少K线数量从120条到60条
- [x] 获取分时数据API（使用东方财富分时接口）

## 腾讯自选股风格重设计
- [x] 切换为深色主题（专业金融风格）
- [x] 优化股票列表样式（涨跌幅圆角色块）
- [x] 丰富详情页数据网格（今开/昨收/最高/最低/换手率/市盈率等）
- [x] K线图深色配色适配
- [x] 添加成交量副图
- [ ] 添加五日K线选项
