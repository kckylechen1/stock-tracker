# ç‰›è‚¡ä¿¡å·åˆ†æç³»ç»Ÿæ–¹æ³•è®ºæ–‡æ¡£

**ç‰ˆæœ¬**: v2.0
**æ›´æ–°æ—¶é—´**: 2026å¹´1æœˆ11æ—¥
**é€‚ç”¨èŒƒå›´**: Aè‚¡æŠ€æœ¯åˆ†æã€ç‰›è‚¡ä¿¡å·è¯†åˆ«ã€æ¿å—æŠ•èµ„ç­–ç•¥

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ•°æ®è·å–å±‚](#æ•°æ®è·å–å±‚)
3. [æŠ€æœ¯åˆ†æå±‚](#æŠ€æœ¯åˆ†æå±‚)
4. [ä¿¡å·è¯†åˆ«å±‚](#ä¿¡å·è¯†åˆ«å±‚)
5. [æŠ•èµ„å†³ç­–å±‚](#æŠ•èµ„å†³ç­–å±‚)
6. [é£é™©æ§åˆ¶å±‚](#é£é™©æ§åˆ¶å±‚)
7. [åˆ†ææµç¨‹](#åˆ†ææµç¨‹)
8. [å·¥å…·ä½“ç³»](#å·¥å…·ä½“ç³»)
9. [éªŒè¯æ–¹æ³•](#éªŒè¯æ–¹æ³•)
10. [æŒç»­ä¼˜åŒ–](#æŒç»­ä¼˜åŒ–)

---

## ç³»ç»Ÿæ¦‚è¿°

### ğŸ¯ ç³»ç»Ÿç›®æ ‡

ç‰›è‚¡ä¿¡å·åˆ†æç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºæŠ€æœ¯åˆ†æçš„é‡åŒ–æŠ•èµ„è¾…åŠ©å·¥å…·ï¼Œæ—¨åœ¨ï¼š

1. **è‡ªåŠ¨è¯†åˆ«ç‰›è‚¡å¯åŠ¨ä¿¡å·** - é€šè¿‡æŠ€æœ¯æŒ‡æ ‡å‘ç°è‚¡ç¥¨çš„çˆ†å‘æ€§ä¸Šæ¶¨æœºä¼š
2. **é‡åŒ–è¯„ä¼°æŠ•èµ„ä»·å€¼** - ç»¼åˆå¤šç§æŠ€æœ¯æŒ‡æ ‡ç»™å‡ºå®¢è§‚çš„è¯„åˆ†
3. **æ§åˆ¶æŠ•èµ„é£é™©** - å»ºç«‹å®Œæ•´çš„æ­¢ç›ˆæ­¢æŸå’Œä»“ä½ç®¡ç†ä½“ç³»
4. **æé«˜æŠ•èµ„æ•ˆç‡** - è‡ªåŠ¨åŒ–åˆ†ææµç¨‹ï¼Œå‡å°‘ä¸»è§‚åˆ¤æ–­è¯¯å·®

### ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
æ•°æ®è·å–å±‚ â†â†’ æŠ€æœ¯åˆ†æå±‚ â†â†’ ä¿¡å·è¯†åˆ«å±‚ â†â†’ æŠ•èµ„å†³ç­–å±‚ â†â†’ é£é™©æ§åˆ¶å±‚
     â†“             â†“             â†“             â†“             â†“
   AKShare      å‡çº¿/MACD     å¯åŠ¨æ—¥æ£€æµ‹    è¯„åˆ†ç®—æ³•      æ­¢ç›ˆæ­¢æŸ
   APIæ•°æ®      RSI/KDJ       ä¿¡å·å¼ºåº¦      ä»“ä½é…ç½®      é£é™©è¯„ä¼°
```

### âœ… ç³»ç»Ÿä¼˜åŠ¿

- **é‡åŒ–å®¢è§‚**: åŸºäºæ•°å­¦ç®—æ³•ï¼Œå‡å°‘ä¸»è§‚æƒ…ç»ªå½±å“
- **è‡ªåŠ¨åŒ–é«˜æ•ˆ**: ä¸€é”®åˆ†æï¼Œå¿«é€Ÿå¤„ç†å¤§é‡è‚¡ç¥¨
- **é£é™©å¯æ§**: å†…ç½®é£é™©æ§åˆ¶æœºåˆ¶ï¼Œä¸¥æ ¼æ­¢æŸæ­¢ç›ˆ
- **æŒç»­éªŒè¯**: é€šè¿‡å†å²å›æµ‹éªŒè¯ç³»ç»Ÿæœ‰æ•ˆæ€§

---

## æ•°æ®è·å–å±‚

### 1. æ•°æ®æºé€‰æ‹©

#### ä¸»è¦æ•°æ®æº
- **AKShare API**: ä¸“ä¸šçš„Aè‚¡æ•°æ®æ¥å£ï¼Œæ”¯æŒå†å²Kçº¿ã€å®æ—¶è¡Œæƒ…
- **ä¸œæ–¹è´¢å¯Œ**: æ¦‚å¿µæ¿å—æˆåˆ†è‚¡ã€è¡Œä¸šæ¿å—æ•°æ®
- **æœ¬åœ°ç¼“å­˜**: å†å²æ•°æ®ç¼“å­˜ï¼Œå‡å°‘APIè°ƒç”¨é¢‘ç‡

#### æ•°æ®ç±»å‹
- **æ—¥çº¿æ•°æ®**: å¼€ç›˜ä»·ã€æ”¶ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·ã€æˆäº¤é‡ã€æˆäº¤é¢
- **è´¢åŠ¡æ•°æ®**: åŸºæœ¬é¢æ•°æ®ï¼ˆå¯é€‰ï¼Œç”¨äºå¢å¼ºåˆ†æï¼‰
- **æ¿å—æ•°æ®**: æ¦‚å¿µæ¿å—ã€è¡Œä¸šæ¿å—æˆåˆ†è‚¡åˆ—è¡¨

### 2. æ•°æ®é¢„å¤„ç†

#### æ•°æ®æ¸…æ´—
```typescript
// æ•°æ®éªŒè¯å’Œæ¸…æ´—
function validateKlineData(klines: KlineData[]): KlineData[] {
    return klines.filter(kline =>
        kline.close > 0 &&
        kline.open > 0 &&
        kline.high >= Math.max(kline.open, kline.close) &&
        kline.low <= Math.min(kline.open, kline.close) &&
        kline.volume > 0
    );
}
```

#### æ•°æ®æ ‡å‡†åŒ–
- æ—¶é—´æ ¼å¼ç»Ÿä¸€ï¼šYYYY-MM-DD
- ä»·æ ¼æ•°æ®ç²¾åº¦ï¼šä¿ç•™2ä½å°æ•°
- æˆäº¤é‡å•ä½ï¼šæ‰‹ï¼ˆ100è‚¡ï¼‰

### 3. APIè°ƒç”¨ç­–ç•¥

#### é¢‘ç‡æ§åˆ¶
- å•è‚¡ç¥¨åˆ†æé—´éš”ï¼š100-200ms
- æ‰¹é‡åˆ†æé—´éš”ï¼š500msæ‰¹æ¬¡é—´éš”
- å¼‚å¸¸é‡è¯•æœºåˆ¶ï¼š3æ¬¡é‡è¯•ï¼ŒæŒ‡æ•°é€€é¿

#### é”™è¯¯å¤„ç†
```typescript
// APIè°ƒç”¨åŒ…è£…å™¨
async function safeApiCall<T>(apiCall: () => Promise<T>, retries = 3): Promise<T> {
    for (let i = 0; i < retries; i++) {
        try {
            return await apiCall();
        } catch (error) {
            if (i === retries - 1) throw error;
            await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
        }
    }
}
```

---

## æŠ€æœ¯åˆ†æå±‚

### 1. å‡çº¿ç³»ç»Ÿ

#### è®¡ç®—æ–¹æ³•
```typescript
function calculateMA(prices: number[], period: number): number[] {
    const result: number[] = [];
    for (let i = period - 1; i < prices.length; i++) {
        const sum = prices.slice(i - period + 1, i + 1).reduce((a, b) => a + b, 0);
        result.push(sum / period);
    }
    return result;
}
```

#### å‡çº¿æ’åˆ—åˆ†æ
```typescript
function analyzeMaArrangement(ma5: number, ma10: number, ma20: number, ma60: number): string {
    if (ma5 > ma10 && ma10 > ma20 && ma20 > ma60) return 'å¤šå¤´æ’åˆ—';
    if (ma5 < ma10 && ma10 < ma20 && ma20 < ma60) return 'ç©ºå¤´æ’åˆ—';
    return 'ç›˜æ•´';
}
```

#### è¯„åˆ†æ ‡å‡†
- **å¤šå¤´æ’åˆ—**: +20åˆ†
- **ç›˜æ•´ä¸”MA5>MA10**: +10åˆ†
- **ç©ºå¤´æ’åˆ—**: 0åˆ†

### 2. MACDæŒ‡æ ‡

#### è®¡ç®—å…¬å¼
```typescript
function calculateMACD(prices: number[]): MACDResult {
    const fastEMA = calculateEMA(prices, 12);
    const slowEMA = calculateEMA(prices, 26);
    const dif = fastEMA.map((fast, i) => fast - slowEMA[i]);

    const dea = calculateEMA(dif, 9);
    const histogram = dif.map((d, i) => d - dea[i]);

    return { dif, dea, histogram };
}
```

#### ä¿¡å·è¯†åˆ«
- **é‡‘å‰**: DIFä¸Šç©¿DEA (+15åˆ†)
- **çº¢æŸ±æ”¾å¤§**: çº¢æŸ±æ¯”å‰ä¸€æ—¥å¢åŠ  (+10åˆ†)
- **æ­»å‰**: DIFä¸‹ç©¿DEA (-15åˆ†)

### 3. RSIæŒ‡æ ‡

#### è®¡ç®—æ–¹æ³•
```typescript
function calculateRSI(prices: number[], period = 14): number[] {
    const gains: number[] = [];
    const losses: number[] = [];

    for (let i = 1; i < prices.length; i++) {
        const change = prices[i] - prices[i - 1];
        gains.push(change > 0 ? change : 0);
        losses.push(change < 0 ? -change : 0);
    }

    const avgGain = calculateSMA(gains, period);
    const avgLoss = calculateSMA(losses, period);

    return avgGain.map((gain, i) => {
        const loss = avgLoss[i];
        const rs = loss === 0 ? 100 : gain / loss;
        return 100 - (100 / (1 + rs));
    });
}
```

#### è¯„åˆ†æ ‡å‡†
- **65-80åŒºé—´**: +20åˆ† (å¼ºåŠ¿)
- **50-65åŒºé—´**: +15åˆ† (åå¼º)
- **80ä»¥ä¸Š**: +10åˆ† (è¶…ä¹°)
- **30ä»¥ä¸‹**: +10åˆ† (è¶…å–)

### 4. KDJæŒ‡æ ‡

#### è®¡ç®—æ–¹æ³•
```typescript
function calculateKDJ(highs: number[], lows: number[], closes: number[]): KDJResult {
    const period = 9;
    const kValues: number[] = [];
    const dValues: number[] = [];
    const jValues: number[] = [];

    for (let i = period - 1; i < closes.length; i++) {
        const highPeriod = highs.slice(i - period + 1, i + 1);
        const lowPeriod = lows.slice(i - period + 1, i + 1);
        const close = closes[i];

        const highest = Math.max(...highPeriod);
        const lowest = Math.min(...lowPeriod);

        const rsv = ((close - lowest) / (highest - lowest)) * 100;
        const k = kValues.length === 0 ? rsv : (kValues[kValues.length - 1] * 2 + rsv) / 3;
        const d = dValues.length === 0 ? k : (dValues[dValues.length - 1] * 2 + k) / 3;
        const j = 3 * k - 2 * d;

        kValues.push(k);
        dValues.push(d);
        jValues.push(j);
    }

    return { k: kValues, d: dValues, j: jValues };
}
```

#### ä¿¡å·è¯†åˆ«
- **é‡‘å‰**: Kçº¿ä¸Šç©¿Dçº¿ (+15åˆ†)
- **J>50**: +10åˆ† (å¼ºåŠ¿)
- **æ­»å‰**: Kçº¿ä¸‹ç©¿Dçº¿ (-15åˆ†)

### 5. æˆäº¤é‡åˆ†æ

#### é‡æ¯”è®¡ç®—
```typescript
function calculateVolumeRatio(currentVolume: number, volumes: number[]): number {
    const avgVolume5 = volumes.slice(-5).reduce((a, b) => a + b, 0) / 5;
    const avgVolume20 = volumes.slice(-20).reduce((a, b) => a + b, 0) / 20;
    const avgVolume = (avgVolume5 + avgVolume20) / 2;

    return currentVolume / avgVolume;
}
```

#### è¯„åˆ†æ ‡å‡†
- **æ”¾é‡ä¸Šæ¶¨**: é‡æ¯”>1.3ä¸”ä¸Šæ¶¨ (+15åˆ†)
- **æ”¾é‡**: é‡æ¯”>1.3 (+10åˆ†)
- **ç¼©é‡**: é‡æ¯”<0.7 (-10åˆ†)

---

## ä¿¡å·è¯†åˆ«å±‚

### 1. å¯åŠ¨æ—¥æ£€æµ‹ç®—æ³•

#### æ ¸å¿ƒé€»è¾‘
```typescript
function detectLaunchDay(klines: KlineData[]): string | null {
    // ä»ç¬¬60ä¸ªäº¤æ˜“æ—¥å¼€å§‹åˆ†æï¼ˆç¡®ä¿æœ‰è¶³å¤Ÿå†å²æ•°æ®ï¼‰
    for (let i = 60; i < klines.length; i++) {
        const today = klines[i];
        const prev20Days = klines.slice(i - 20, i);

        // 1. çªç ´æ¡ä»¶ï¼šæ”¶ç›˜ä»·çªç ´20æ—¥æœ€é«˜ç‚¹3%
        const prev20High = Math.max(...prev20Days.map(k => k.high));
        const isBreakout = today.close > prev20High * 1.03;

        // 2. æ”¾é‡æ¡ä»¶ï¼šæˆäº¤é‡æ”¾å¤§2å€
        const prev20AvgVol = prev20Days.reduce((sum, k) => sum + k.volume, 0) / 20;
        const isHighVolume = today.volume > prev20AvgVol * 2;

        // 3. å¼ºä¸Šæ¶¨æ¡ä»¶ï¼šå¤§é˜³çº¿5%
        const isBigUp = today.close > today.open * 1.05;

        // åŒæ—¶æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶
        if (isBreakout && isHighVolume && isBigUp) {
            return today.date;
        }
    }
    return null;
}
```

#### ç®—æ³•ä¼˜åŠ¿
- **å¤šç»´åº¦éªŒè¯**: ä»·æ ¼ã€æˆäº¤é‡ã€Kçº¿å½¢æ€ä¸‰é‡ç¡®è®¤
- **å†å²æ•°æ®å……è¶³**: åŸºäº60æ—¥ä»¥ä¸Šå†å²æ•°æ®åˆ¤æ–­
- **å‚æ•°å¯è°ƒæ•´**: å¯æ ¹æ®å¸‚åœºç¯å¢ƒè°ƒæ•´é˜ˆå€¼

### 2. ä¿¡å·å¼ºåº¦è¯„ä¼°

#### ç»¼åˆè¯„åˆ†ç®—æ³•
```typescript
function calculateSignalScore(indicators: IndicatorResult): number {
    let score = 0;

    // å‡çº¿è¯„åˆ† (æœ€é«˜25åˆ†)
    if (indicators.maArrangement === 'å¤šå¤´æ’åˆ—') score += 20;
    else if (indicators.lastMA5 > indicators.lastMA10) score += 10;

    // MACDè¯„åˆ† (æœ€é«˜15åˆ†)
    if (indicators.macdSignal === 'é‡‘å‰') score += 15;
    else if (indicators.macdSignal === 'çº¢æŸ±') score += 10;

    // RSIè¯„åˆ† (æœ€é«˜20åˆ†)
    const rsi = indicators.rsiValue;
    if (rsi > 65 && rsi < 80) score += 20;
    else if (rsi > 50 && rsi <= 65) score += 15;
    else if (rsi < 30) score += 10;

    // KDJè¯„åˆ† (æœ€é«˜15åˆ†)
    if (indicators.kdjSignal === 'é‡‘å‰') score += 15;
    else if (indicators.kdjJ > 50) score += 10;

    // æˆäº¤é‡è¯„åˆ† (æœ€é«˜15åˆ†)
    if (indicators.volumeStatus === 'æ”¾é‡' && indicators.priceChange > 0) score += 15;
    else if (indicators.volumeStatus === 'æ”¾é‡') score += 10;

    // ç‰¹æ®ŠåŠ åˆ†ï¼šå¼ºåŠ¿çªç ´
    if (indicators.priceBreakout && indicators.volumeRatio > 1.5) score += 15;

    return Math.min(100, Math.max(0, score));
}
```

### 3. ä¿¡å·è¿‡æ»¤æœºåˆ¶

#### æ­£å‘ä¿¡å·è¿‡æ»¤
- å¿…é¡»æœ‰æ˜ç¡®çš„å¯åŠ¨æ—¥
- æŠ€æœ¯æŒ‡æ ‡ä¸èƒ½å‡ºç°ä¸¥é‡èƒŒç¦»
- æˆäº¤é‡ä¸èƒ½ä¸¥é‡èç¼©

#### è´Ÿå‘ä¿¡å·è¿‡æ»¤
- æ’é™¤è¿‘æœŸæœ‰é‡å¤§è´Ÿé¢æ–°é—»çš„è‚¡ç¥¨
- æ’é™¤æŠ€æœ¯æŒ‡æ ‡ä¸¥é‡è¶…ä¹°çš„è‚¡ç¥¨
- æ’é™¤æˆäº¤é‡æåº¦èç¼©çš„è‚¡ç¥¨

---

## æŠ•èµ„å†³ç­–å±‚

### 1. è¯„åˆ†åŒºé—´åˆ’åˆ†

#### äº”çº§è¯„åˆ†ä½“ç³»
```typescript
function getInvestmentRecommendation(score: number): Recommendation {
    if (score >= 85) {
        return {
            level: 'å¼ºçƒˆä¹°å…¥',
            risk: 'é«˜',
            positionSize: '5-8%',
            holdPeriod: '1-3ä¸ªæœˆ',
            stopLoss: '-15%',
            takeProfit: '+20-30%'
        };
    } else if (score >= 70) {
        return {
            level: 'ä¹°å…¥',
            risk: 'ä¸­é«˜',
            positionSize: '8-10%',
            holdPeriod: '2-4ä¸ªæœˆ',
            stopLoss: '-12%',
            takeProfit: '+15-25%'
        };
    } else if (score >= 55) {
        return {
            level: 'æŒæœ‰',
            risk: 'ä¸­',
            positionSize: '10-15%',
            holdPeriod: '3-6ä¸ªæœˆ',
            stopLoss: '-10%',
            takeProfit: '+10-20%'
        };
    } else if (score >= 40) {
        return {
            level: 'è§‚æœ›',
            risk: 'ä¸­ä½',
            positionSize: '5-8%',
            holdPeriod: 'è§†æƒ…å†µè€Œå®š',
            stopLoss: '-8%',
            takeProfit: '+5-15%'
        };
    } else {
        return {
            level: 'å–å‡º',
            risk: 'ä½',
            positionSize: '0%',
            holdPeriod: 'ä¸é€‚ç”¨',
            stopLoss: 'ä¸é€‚ç”¨',
            takeProfit: 'ä¸é€‚ç”¨'
        };
    }
}
```

### 2. ä»“ä½é…ç½®ç­–ç•¥

#### åŸºäºKellyå…¬å¼çš„ä»“ä½è®¡ç®—
```typescript
function calculateKellyPosition(winRate: number, winLossRatio: number): number {
    // Kellyå…¬å¼ï¼šf = (bp - q) / b
    // å…¶ä¸­ï¼šb = èµ”ç‡ï¼Œp = èƒœç‡ï¼Œq = è´¥ç‡
    const b = winLossRatio;
    const p = winRate;
    const q = 1 - p;

    const kellyFraction = (b * p - q) / b;
    return Math.max(0, Math.min(0.2, kellyFraction)); // é™åˆ¶åœ¨0-20%ä¹‹é—´
}
```

#### åŠ¨æ€ä»“ä½è°ƒæ•´
- **åˆæ¬¡å»ºä»“**: æ ¹æ®è¯„åˆ†ç¡®å®šåŸºç¡€ä»“ä½
- **åŠ ä»“æ¡ä»¶**: ä¿¡å·æŒç»­åŠ å¼ºï¼Œå¯é€‚åº¦åŠ ä»“
- **å‡ä»“æ¡ä»¶**: ä¿¡å·è½¬å¼±æˆ–åˆ°è¾¾æ­¢ç›ˆç‚¹ï¼ŒåŠæ—¶å‡ä»“
- **æ¸…ä»“æ¡ä»¶**: åˆ°è¾¾æ­¢æŸç‚¹æˆ–ä¿¡å·å½»åº•æ¶ˆå¤±

### 3. ç»„åˆä¼˜åŒ–

#### æ¿å—åˆ†æ•£
- **å•ä¸€æ¿å—**: ä¸è¶…è¿‡æ€»èµ„äº§çš„30%
- **ç›¸å…³æ¿å—**: ä¸è¶…è¿‡æ€»èµ„äº§çš„50%
- **è·¨æ¿å—**: å¯è¦†ç›–æ›´å¤šæœºä¼š

#### ä¸ªè‚¡æƒé‡å¹³è¡¡
- **é«˜è¯„åˆ†è‚¡ç¥¨**: è·å¾—æ›´é«˜æƒé‡
- **ä¸­ç­‰è¯„åˆ†è‚¡ç¥¨**: ä¿æŒå‡è¡¡é…ç½®
- **ä½è¯„åˆ†è‚¡ç¥¨**: é€æ­¥å‡ä»“è‡³æ¸…ä»“

---

## é£é™©æ§åˆ¶å±‚

### 1. æ­¢ç›ˆæ­¢æŸä½“ç³»

#### æŠ€æœ¯æ­¢æŸ
```typescript
function calculateStopLoss(entryPrice: number, indicators: IndicatorResult): number {
    // åŸºäºæŠ€æœ¯æŒ‡æ ‡çš„åŠ¨æ€æ­¢æŸ
    const atr = calculateATR(indicators); // å¹³å‡çœŸå®æ³¢å¹…
    const support = findSupportLevel(indicators); // æ”¯æ’‘ä½

    // å–ATRå’Œæ”¯æ’‘ä½çš„è¾ƒå°å€¼ä½œä¸ºæ­¢æŸä½
    const stopLossByATR = entryPrice * (1 - atr * 1.5);
    const stopLossBySupport = support * 0.98;

    return Math.max(stopLossByATR, stopLossBySupport);
}
```

#### ç§»åŠ¨æ­¢ç›ˆ
```typescript
function updateTrailingStop(currentPrice: number, highestPrice: number): number {
    // ç§»åŠ¨æ­¢æŸï¼šä»·æ ¼ä¸Šæ¶¨æ—¶ï¼Œç›¸åº”æé«˜æ­¢æŸä½
    const profitRatio = (currentPrice - entryPrice) / entryPrice;

    if (profitRatio > 0.2) { // ç›ˆåˆ©è¶…è¿‡20%
        return highestPrice * 0.9; // è·Œç ´æœ€é«˜ä»·10%æ—¶æ­¢æŸ
    } else if (profitRatio > 0.1) { // ç›ˆåˆ©è¶…è¿‡10%
        return highestPrice * 0.95; // è·Œç ´æœ€é«˜ä»·5%æ—¶æ­¢æŸ
    } else {
        return entryPrice * 0.9; // è·Œç ´æˆæœ¬ä»·10%æ—¶æ­¢æŸ
    }
}
```

### 2. é£é™©è¯„ä¼°çŸ©é˜µ

#### å¤šç»´åº¦é£é™©è¯„ä¼°
```typescript
interface RiskAssessment {
    marketRisk: number;      // å¸‚åœºé£é™© (0-100)
    sectorRisk: number;      // æ¿å—é£é™© (0-100)
    companyRisk: number;     // ä¸ªè‚¡æƒé£é™© (0-100)
    liquidityRisk: number;   // æµåŠ¨æ€§é£é™© (0-100)
    totalRisk: number;       // ç»¼åˆé£é™© (0-100)
}

function assessRisk(stock: StockInfo, marketData: MarketData): RiskAssessment {
    const marketRisk = calculateMarketRisk(marketData);
    const sectorRisk = calculateSectorRisk(stock.sector);
    const companyRisk = calculateCompanyRisk(stock);
    const liquidityRisk = calculateLiquidityRisk(stock);

    const totalRisk = (marketRisk * 0.3 + sectorRisk * 0.3 +
                      companyRisk * 0.3 + liquidityRisk * 0.1);

    return {
        marketRisk,
        sectorRisk,
        companyRisk,
        liquidityRisk,
        totalRisk: Math.min(100, Math.max(0, totalRisk))
    };
}
```

### 3. èµ„é‡‘ç®¡ç†

#### æœ€å¤§å›æ’¤æ§åˆ¶
```typescript
class PortfolioManager {
    private maxDrawdown = 0.15; // æœ€å¤§å›æ’¤15%
    private currentDrawdown = 0;

    updateDrawdown(currentValue: number, peakValue: number): void {
        this.currentDrawdown = (peakValue - currentValue) / peakValue;

        if (this.currentDrawdown > this.maxDrawdown) {
            // è§¦å‘é£é™©æ§åˆ¶ï¼šå‡ä»“æˆ–åœæ­¢äº¤æ˜“
            this.triggerRiskControl();
        }
    }

    private triggerRiskControl(): void {
        // 1. æš‚åœæ–°å¼€ä»“ä½
        // 2. å¯¹é«˜é£é™©ä»“ä½è¿›è¡Œå‡ä»“
        // 3. å¢åŠ ç°é‡‘æŒæœ‰æ¯”ä¾‹
        // 4. ç­‰å¾…å¸‚åœºä¼ç¨³åå†æ¢å¤äº¤æ˜“
    }
}
```

---

## åˆ†ææµç¨‹

### 1. å•è‚¡ç¥¨åˆ†ææµç¨‹

```mermaid
graph TD
    A[è¾“å…¥è‚¡ç¥¨ä»£ç ] --> B[è·å–å†å²æ•°æ®]
    B --> C[æ•°æ®é¢„å¤„ç†]
    C --> D[è®¡ç®—æŠ€æœ¯æŒ‡æ ‡]
    D --> E[æ£€æµ‹å¯åŠ¨ä¿¡å·]
    E --> F[è®¡ç®—ç»¼åˆè¯„åˆ†]
    F --> G[ç”ŸæˆæŠ•èµ„å»ºè®®]
    G --> H[é£é™©è¯„ä¼°]
    H --> I[è¾“å‡ºåˆ†ææŠ¥å‘Š]
```

### 2. æ‰¹é‡åˆ†ææµç¨‹

```mermaid
graph TD
    A[è·å–è‚¡ç¥¨åˆ—è¡¨] --> B[åˆ†ç»„å¤„ç†]
    B --> C[å¹¶è¡Œåˆ†æ]
    C --> D[ç»“æœæ±‡æ€»]
    D --> E[æ’åºç­›é€‰]
    E --> F[ç»„åˆä¼˜åŒ–]
    F --> G[é£é™©æ§åˆ¶]
    G --> H[ç”ŸæˆæŠ¥å‘Š]
```

### 3. æ¿å—åˆ†ææµç¨‹

```mermaid
graph TD
    A[é€‰æ‹©æ¿å—] --> B[è·å–æˆåˆ†è‚¡]
    B --> C[æ‰¹é‡ä¿¡å·åˆ†æ]
    C --> D[ç»Ÿè®¡æ±‡æ€»]
    D --> E[è¯†åˆ«æœºä¼šè‚¡]
    E --> F[æ¿å—ç­–ç•¥]
    F --> G[é£é™©è¯„ä¼°]
    G --> H[æŠ•èµ„å»ºè®®]
```

---

## å·¥å…·ä½“ç³»

### 1. æ ¸å¿ƒå·¥å…·

#### æ•°æ®è·å–å·¥å…·
- **AKShare**: ä¸“ä¸šAè‚¡æ•°æ®API
- **ä¸œæ–¹è´¢å¯Œ**: æ¿å—å’Œè¡Œæƒ…æ•°æ®
- **æœ¬åœ°ç¼“å­˜**: æ•°æ®ç¼“å­˜å’Œç¦»çº¿å¤„ç†

#### åˆ†æå·¥å…·
- **TechnicalAnalysis**: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—åº“
- **SignalDetector**: ä¿¡å·è¯†åˆ«å¼•æ“
- **RiskManager**: é£é™©æ§åˆ¶ç³»ç»Ÿ

#### å¯è§†åŒ–å·¥å…·
- **ChartGenerator**: å›¾è¡¨ç”Ÿæˆå™¨
- **ReportBuilder**: æŠ¥å‘Šç”Ÿæˆå™¨
- **Dashboard**: å®æ—¶ç›‘æ§é¢æ¿

### 2. å¼€å‘ç¯å¢ƒ

#### æŠ€æœ¯æ ˆ
- **ç¼–ç¨‹è¯­è¨€**: TypeScript
- **è¿è¡Œç¯å¢ƒ**: Node.js
- **æ¡†æ¶**: Express.js (å¯é€‰ï¼Œç”¨äºWebæœåŠ¡)
- **æ•°æ®åº“**: SQLite/PostgreSQL (ç”¨äºæ•°æ®å­˜å‚¨)

#### ä¾èµ–ç®¡ç†
```json
{
  "dependencies": {
    "axios": "^1.6.0",
    "technicalindicators": "^3.1.0",
    "@types/node": "^20.0.0",
    "tsx": "^4.0.0"
  }
}
```

### 3. éƒ¨ç½²æ–¹å¼

#### æœ¬åœ°éƒ¨ç½²
```bash
# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œåˆ†æè„šæœ¬
npx tsx analyze_stock.ts

# ç”ŸæˆæŠ¥å‘Š
npx tsx generate_report.ts
```

#### äº‘ç«¯éƒ¨ç½²
- **Dockerå®¹å™¨åŒ–**: ç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§
- **APIæœåŠ¡åŒ–**: æä¾›RESTfulæ¥å£
- **å®šæ—¶ä»»åŠ¡**: è‡ªåŠ¨åŒ–æ•°æ®æ›´æ–°å’Œåˆ†æ

---

## éªŒè¯æ–¹æ³•

### 1. å›æµ‹éªŒè¯

#### å†å²å›æµ‹
```typescript
async function backtestStrategy(stocks: string[], startDate: string, endDate: string) {
    const results: BacktestResult[] = [];

    for (const stock of stocks) {
        const trades = await simulateTrades(stock, startDate, endDate);
        const metrics = calculateMetrics(trades);

        results.push({
            stock,
            totalReturn: metrics.totalReturn,
            maxDrawdown: metrics.maxDrawdown,
            winRate: metrics.winRate,
            sharpeRatio: metrics.sharpeRatio
        });
    }

    return results;
}
```

#### ç»©æ•ˆæŒ‡æ ‡
- **æ€»æ”¶ç›Šç‡**: ç­–ç•¥çš„æ•´ä½“æ”¶ç›Šè¡¨ç°
- **æœ€å¤§å›æ’¤**: ç­–ç•¥çš„æœ€å¤§äºæŸå¹…åº¦
- **èƒœç‡**: ç›ˆåˆ©äº¤æ˜“å æ€»äº¤æ˜“çš„æ¯”ä¾‹
- **å¤æ™®æ¯”ç‡**: é£é™©è°ƒæ•´åçš„æ”¶ç›ŠæŒ‡æ ‡

### 2. æ ·æœ¬å¤–éªŒè¯

#### æ»šåŠ¨éªŒè¯
```typescript
function rollingValidation(data: KlineData[], windowSize: number) {
    const results: ValidationResult[] = [];

    for (let i = windowSize; i < data.length; i++) {
        const trainData = data.slice(0, i);
        const testData = data.slice(i, i + 1);

        // åœ¨è®­ç»ƒæ•°æ®ä¸Šè®­ç»ƒæ¨¡å‹
        const model = trainModel(trainData);

        // åœ¨æµ‹è¯•æ•°æ®ä¸ŠéªŒè¯
        const prediction = model.predict(testData);
        const actual = testData[0];

        results.push({
            date: testData[0].date,
            prediction,
            actual: actual.close,
            error: Math.abs(prediction - actual.close) / actual.close
        });
    }

    return results;
}
```

### 3. ç¨³å¥æ€§æµ‹è¯•

#### å‚æ•°æ•æ„Ÿæ€§åˆ†æ
- æµ‹è¯•ä¸åŒå‚æ•°ç»„åˆä¸‹çš„ç³»ç»Ÿè¡¨ç°
- è¯†åˆ«å…³é”®å‚æ•°å’Œæ•æ„Ÿå‚æ•°
- ä¼˜åŒ–å‚æ•°é€‰æ‹©èŒƒå›´

#### å‹åŠ›æµ‹è¯•
- æ¨¡æ‹Ÿæç«¯å¸‚åœºæ¡ä»¶ä¸‹çš„è¡¨ç°
- æµ‹è¯•ç³»ç»Ÿåœ¨ç†Šå¸‚ã€éœ‡è¡å¸‚çš„è¡¨ç°
- éªŒè¯é£é™©æ§åˆ¶æœºåˆ¶çš„æœ‰æ•ˆæ€§

---

## æŒç»­ä¼˜åŒ–

### 1. æ¨¡å‹ä¼˜åŒ–

#### ç‰¹å¾å·¥ç¨‹
- æ¢ç´¢æ–°çš„æŠ€æœ¯æŒ‡æ ‡ç»„åˆ
- å¼•å…¥åŸºæœ¬é¢æ•°æ®å¢å¼ºåˆ†æ
- å¼€å‘è¡Œä¸šç‰¹å®šçš„åˆ†ææ¨¡å‹

#### ç®—æ³•æ”¹è¿›
- é‡‡ç”¨æœºå™¨å­¦ä¹ æ–¹æ³•ä¼˜åŒ–ä¿¡å·è¯†åˆ«
- å¼•å…¥æ·±åº¦å­¦ä¹ è¿›è¡Œæ¨¡å¼è¯†åˆ«
- å¼€å‘è‡ªé€‚åº”çš„å‚æ•°è°ƒæ•´æœºåˆ¶

### 2. æ•°æ®è´¨é‡æå‡

#### æ•°æ®æºæ‰©å±•
- æ¥å…¥æ›´å¤šæ•°æ®æºæé«˜æ•°æ®è´¨é‡
- å®æ—¶æ•°æ®æ¥å…¥æå‡æ—¶æ•ˆæ€§
- æµ·å¤–å¸‚åœºæ•°æ®æ‰©å±•åˆ†æèŒƒå›´

#### æ•°æ®å¤„ç†ä¼˜åŒ–
- æ”¹è¿›æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†ç®—æ³•
- å¼€å‘å¼‚å¸¸æ•°æ®æ£€æµ‹æœºåˆ¶
- ä¼˜åŒ–æ•°æ®å­˜å‚¨å’Œæ£€ç´¢æ•ˆç‡

### 3. ç³»ç»Ÿç›‘æ§

#### æ€§èƒ½ç›‘æ§
```typescript
class SystemMonitor {
    monitorPerformance(): void {
        // ç›‘æ§åˆ†æé€Ÿåº¦
        // ç›‘æ§å†…å­˜ä½¿ç”¨
        // ç›‘æ§APIè°ƒç”¨æˆåŠŸç‡
        // ç›‘æ§ç³»ç»Ÿç¨³å®šæ€§
    }

    alertAnomalies(): void {
        // å¼‚å¸¸æ£€æµ‹å’ŒæŠ¥è­¦
        // æ€§èƒ½ä¸‹é™é¢„è­¦
        // æ•°æ®è´¨é‡é—®é¢˜æé†’
    }
}
```

#### æ•ˆæœè·Ÿè¸ª
- è·Ÿè¸ªç­–ç•¥çš„å®é™…æ‰§è¡Œæ•ˆæœ
- å®šæœŸè¿›è¡Œç»©æ•ˆè¯„ä¼°å’Œå½’å› åˆ†æ
- æ ¹æ®å®é™…ç»“æœè°ƒæ•´ç³»ç»Ÿå‚æ•°

### 4. ç”¨æˆ·åé¦ˆ

#### åé¦ˆæ”¶é›†
- æ”¶é›†ç”¨æˆ·ä½¿ç”¨åé¦ˆ
- åˆ†æç”¨æˆ·éœ€æ±‚å’Œç—›ç‚¹
- è¯†åˆ«æ”¹è¿›æœºä¼šå’Œä¼˜åŒ–æ–¹å‘

#### è¿­ä»£æ›´æ–°
- åŸºäºåé¦ˆè¿›è¡Œç³»ç»Ÿæ”¹è¿›
- å®šæœŸå‘å¸ƒæ›´æ–°ç‰ˆæœ¬
- ç»´æŠ¤å‘åå…¼å®¹æ€§

---

## ğŸ“Š åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹1: AIè¯­æ–™æ¿å—åˆ†æ

**åˆ†æå¯¹è±¡**: ä¸œæ–¹è´¢å¯ŒAIè¯­æ–™æ¿å—31åªæˆåˆ†è‚¡
**åˆ†æç»“æœ**:
- ä¿¡å·è¯†åˆ«ç‡: 90.3% (28/31)
- å¹³å‡æ¶¨å¹…: +34.80%
- æ¶¨å¹…å† å†›: å²©å±±ç§‘æŠ€ +164.03%

**æŠ•èµ„å»ºè®®**:
- å¼ºçƒˆä¹°å…¥: 4åª (å²©å±±ç§‘æŠ€ã€åˆ©æ¬§è‚¡ä»½ç­‰)
- ä¹°å…¥: 6åª (æ¾œèµ·ç§‘æŠ€ã€å®å¾·æ—¶ä»£ç­‰)
- æŒæœ‰: 2åª (é‡‘å±±åŠå…¬ã€æµ·åº·å¨è§†)

### æ¡ˆä¾‹2: 30å¤§ç›˜è‚¡å›æµ‹

**åˆ†æå¯¹è±¡**: 2025å¹´æ¶¨å¹…æœ€å¤§çš„30åªå¤§ç›˜è‚¡
**åˆ†æç»“æœ**:
- ä¿¡å·è¯†åˆ«ç‡: 73.3% (22/30)
- å¹³å‡æ”¶ç›Š: +54.72%
- æœ€é«˜æ”¶ç›Š: æ–°æ˜“ç›› +393.27%

**ç³»ç»ŸéªŒè¯**:
- æœ‰æ•ˆæ€§ç¡®è®¤: æŠ€æœ¯åˆ†æå¯¹ç‰›è‚¡è¯†åˆ«æœ‰æ•ˆ
- é£é™©æ§åˆ¶: å†…ç½®æ­¢ç›ˆæ­¢æŸæœºåˆ¶
- å®ç”¨æ€§éªŒè¯: å¯åº”ç”¨äºå®é™…æŠ•èµ„å†³ç­–

---

**æ–¹æ³•è®ºæ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æœ€åæ›´æ–°**: 2026å¹´1æœˆ11æ—¥
**ç»´æŠ¤è€…**: AIé‡åŒ–æŠ•èµ„ç³»ç»Ÿ
**é€‚ç”¨èŒƒå›´**: Aè‚¡æŠ€æœ¯åˆ†æå’Œé‡åŒ–æŠ•èµ„

---
*ç‰›è‚¡ä¿¡å·åˆ†æç³»ç»Ÿæ–¹æ³•è®ºå®Œæ•´æ–‡æ¡£*